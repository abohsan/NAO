<?xml version="1.0" encoding="UTF-8" ?>
<ChoregrapheProject xmlns="http://www.aldebaran-robotics.com/schema/choregraphe/project.xsd" xar_version="3">
    <Box name="root" id="-1" localization="8" tooltip="Root box of Choregraphe&apos;s project. Highest level possible." x="0" y="0">
        <bitmap>media/images/box/root.png</bitmap>
        <script language="4">
            <content>
                <![CDATA[]]>
</content>
        </script>
        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
        <Timeline enable="0">
            <BehaviorLayer name="behavior_layer1">
                <BehaviorKeyframe name="keyframe1" index="1">
                    <Diagram>
                        <Box name="Random Quote Listener" id="11" localization="8" tooltip="Nao Listens for words from a random sentance in a file and then says quote if he hears any of those words" x="162" y="19">
                            <bitmap>media/images/box/interaction/choice.png</bitmap>
                            <script language="4">
                                <content>
                                    <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False

    def onInput_onStart(self):
        self.bIsRunning = True

    def onInput_onStop(self):
        if( self.bIsRunning ):
            self.onUnload()
            self.onStopped()]]>
</content>
                            </script>
                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                            <Output name="OnStop" type="1" type_size="1" nature="1" inner="0" tooltip="" id="4" />
                            <Output name="answer" type="3" type_size="1" nature="1" inner="0" tooltip="Answer recognized." id="5" />
                            <Timeline enable="0">
                                <BehaviorLayer name="behavior_layer1">
                                    <BehaviorKeyframe name="keyframe1" index="1">
                                        <Diagram>
                                            <Box name="Speech Reco." id="1" localization="8" tooltip="Try to recognize a word from a list of words set in the box parameters." x="373" y="17">
                                                <bitmap>media/images/box/interaction/ear.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.asr = ALProxy("ALSpeechRecognition")

    def onLoad(self):
        self.bIsRunning = False

    def onUnload(self):
        self.bIsRunning = False
        self.bMustStop = True

    def onInput_onStart(self):
        if(self.bIsRunning):
            return
        self.bIsRunning = True
        self.bMustStop = False
        try:
            if( not self.bMustStop ):
                self.asr.setVisualExpression(self.getParameter("Visual expression"))
            if( not self.bMustStop ):
                self.asr.setVocabulary( self.getParameter("Word list").split(';'), self.getParameter("Enable word spotting") )
            if( self.bMustStop ):
                self.onStopped()
        except RuntimeError, e:
            self.onUnload()
            raise e

    def onInput_onStop(self):
        if( self.bIsRunning ):
            self.onUnload()
            self.onStopped()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Starts speech recongition." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stops speech recongintion." id="3" />
                                                <Input name="WordRecognized" type="0" type_size="1" nature="4" stm_value_name="WordRecognized" inner="1" tooltip="Connected to ALMemory. Will be stimulated every time the value subscribed to changes, respecting the refresh period." id="4" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is stopped." id="5" />
                                                <Output name="wordRecognized" type="3" type_size="1" nature="2" inner="0" tooltip="Word recognized with a threshold high enough trust." id="6" />
                                                <Output name="onNothing" type="1" type_size="1" nature="2" inner="0" tooltip="Nothing has been understood." id="7" />
                                                <Parameter name="Word list" inherits_from_parent="0" content_type="3" value="yes;no" default_value="yes;no" custom_choice="0" tooltip="List of words which must be recognized separated by &apos;;&apos;." id="8" />
                                                <Parameter name="Threshold (%)" inherits_from_parent="0" content_type="1" value="30" default_value="30" min="0" max="100" tooltip="If the threshold associated with the word recognized is below this threshold, the&#x0A;robot will consider that it is not recognized." id="9" />
                                                <Parameter name="Visual expression" inherits_from_parent="0" content_type="0" value="0" default_value="1" tooltip="Use the LEDs to show feedbacks from NAO during the recognition.&#x0A;&#x0A;For example:&#x0A;- Eyes leds get blue and turn when the speech recognition is launched.&#x0A;- They get yellow when NAO hears someone talking and analyses what it heard.&#x0A;- They flash in green when NAO understood and flash in red otherwise." id="10" />
                                                <Parameter name="Enable word spotting" inherits_from_parent="0" content_type="0" value="1" default_value="0" tooltip="If this option is not activated NAO will only understand exact expressions. If it is, he&#x0A;will spot the exact expressions even in the middle of a sentence.&#x0A;&#x0A;!!Warning!! This option is only available with the speech recognition module using&#x0A;Nuance (ie in Atom version of NAO)." id="11" />
                                                <Timeline enable="0">
                                                    <BehaviorLayer name="behavior_layer1">
                                                        <BehaviorKeyframe name="keyframe1" index="1" bitmap="media/images/box/interaction/say.png">
                                                            <Diagram>
                                                                <Box name="Process Word" id="1" localization="8" tooltip="Process speech recognition extractor data (WordRecognized) to give the most&#x0A;interesting data." x="175" y="80">
                                                                    <bitmap>media/images/box/interaction/ear.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self, p):
        if(len(p) > 1):
            if(p[1] >= self.getParameter("Threshold (%)")/100.):
                self.onWord(p[0]) #~ activate output of the box
            else:
                self.onNothing()
        else:
            self.onNothing()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="0" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input. It must be the&#x0A;WordRecognized extractor data." id="2" />
                                                                    <Output name="onWord" type="3" type_size="1" nature="1" inner="0" tooltip="The word recognized." id="3" />
                                                                    <Output name="onNothing" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent if nothing has been recognized or the word recognized had&#x0A;not a recognition threshold high enough to be taken into account." id="4" />
                                                                </Box>
                                                                <Link inputowner="1" indexofinput="2" outputowner="0" indexofoutput="4" />
                                                                <Link inputowner="0" indexofinput="6" outputowner="1" indexofoutput="3" />
                                                                <Link inputowner="0" indexofinput="7" outputowner="1" indexofoutput="4" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                </Timeline>
                                            </Box>
                                            <Box name="BWait" id="3" localization="8" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." x="418" y="342">
                                                <bitmap>media/images/box/wait.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import threading

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="2" value="3" default_value="1" min="0" max="5000" tooltip="Duration the box waits before stimulating the output." id="5" />
                                            </Box>
                                            <Box name="Random Citation" id="2" localization="8" tooltip="Supply a text file you wish Nao to read as a resource via the &apos;input file&apos; parameter. The file is randomly quoted." x="102" y="314">
                                                <bitmap>media/images/box/interaction/say.png</bitmap>
                                                <bitmap>media/images/box/folder.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import os
import random
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.fm = ALProxy("ALFrameManager")
        self.tts = ALProxy("ALTextToSpeech")
        self.StopFlag = False
    def onLoad(self):
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        filename  = self.getParameter("Input File")
        fullpath = self.fm.getBehaviorPath(self.behaviorId) + filename
        input = open(fullpath, "r")
        file_size = os.stat(fullpath)[6]
        input.seek((input.tell()+random.randint(0,file_size-1))%file_size)
        lstchar = ' '
        while lstchar <> '.' and lstchar <> '!' and lstchar <> '?' and lstchar <> '':
            lstchar = input.read(1)
        line = "+=;"
        lstchar = ' '
        while lstchar <> '.' and lstchar <> '!' and lstchar <> '?' and lstchar <> '':
            lstchar = input.read(1)
            if lstchar != " " and lstchar != "\n":
                line = line + lstchar
            else:
                line = line + ";"
        line = line.replace("("," ")
        line = line.replace(")"," ")
        line = line.replace("."," ")
        line = line.replace("!"," ")
        line = line.replace("?"," ")
        line = line.replace(","," ")
        line = line.replace("'"," ")
        line = line.replace("""," ")
        line = line.replace(":"," ")
        line = line.replace("""," ")
        line = line.replace("-"," ")
        line = line.replace("_"," ")
        if line != "":
            self.Listener(line)
            self.onStopped(line) #~ activate output of the box
        else:
            self.onFailure()

    def onInput_onStop(self):
        self.StopFlag=True
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                <Output name="Listener" type="3" type_size="1" nature="2" inner="0" tooltip="" id="5" />
                                                <Output name="onFailure" type="1" type_size="1" nature="1" inner="0" tooltip="" id="6" />
                                                <Parameter name="Input File" inherits_from_parent="0" content_type="4" value="/NAOAI/AIquotelisten.ini" default_value="" tooltip="The file containing the text to be read." id="7" />
                                            </Box>
                                            <Box name="B Parameter" id="6" localization="8" tooltip="Set the parameter you want to be returned in parameters of this box." x="531" y="105">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onGet(self):
        self.onData(self.getParameter("Parameter")) #~ activate output of the box
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onGet" type="1" type_size="1" nature="1" inner="0" tooltip="To send the value on the output." id="2" />
                                                <Output name="onData" type="0" type_size="1" nature="2" inner="0" tooltip="The value of the parameter." id="3" />
                                                <Parameter name="Parameter" inherits_from_parent="0" content_type="3" value="" default_value="" custom_choice="0" tooltip="Name of the parent box parameter you want the value to be returned." id="4" />
                                            </Box>
                                            <Box name="Wait" id="4" localization="8" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." x="200" y="12">
                                                <bitmap>media/images/box/wait.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import threading

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        bRunning = self.tb
        self.onUnload()
        if( bRunning ):
            self.timerOutput()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0" max="5000" tooltip="Duration the box waits before stimulating the output." id="5" />
                                            </Box>
                                            <Box name="Text to List Cleaner" id="7" localization="8" tooltip="cleans text from data and makes it into a list for the listener" x="108" y="154">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import re
import urllib
import urllib2
import xml.dom.minidom

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.myLogger = ALProxy("ALLogger")
        self.tts = ALProxy("ALTextToSpeech")
        self.lang_ref = { 'Chinese' : 'zh',
                               'English' : 'en',
                               'French' : 'fr',
                               'German' : 'de',
                               'Italian' : 'it',
                               'Japanese' : 'ja',
                               'Korean' : 'ko',
                               'Portuguese' : 'pt',
                               'Spanish' : 'es'
                              }
        self.error_msg = { "Chinese" : "我发现了什么。",
                                 "English" : "I found nothing.",
                                 "French" : "Je n'ai rien trouvé.",
                                 "German" : "Ich fand nichts.",
                                 "Italian" : "Ho trovato nulla.",
                                 "Japanese" : "何を発見した。",
                                 "Korean" : "아무것도 없습니다.",
                                 "Portuguese" : "Eu não achei nada.",
                                 "Spanish" : "No he encontrado nada."
                                }

    def cleanup_text(self, data):
        #remove unnecessary parts
        data = re.sub(r'\([^\[\]]*?\)', '', data)  # remove parentheses text blocks
        data = re.sub(r'(?u)【[^[\]]*?】', '', data)  # remove parentheses text blocks (japanese)
        data = re.sub(r'(?u)（[^[\]]*?）', '', data)  # remove parentheses text blocks (japanese)
        #replace chars
        data = data.replace("|", " ")
        data = data.replace(";", ".")
        data = data.replace(" - ", ", ")
        #remove chars
        data = data.replace('"', '')  # remove quotes
        data = data.replace('«', '')    # remove quotes
        data = data.replace('»', '')    # remove quotes
        data = data.replace("#", "") # remove hashes
        data = data.replace("/", "")   # remove slashes
        data = data.replace("*", "") # remove stars
        data = data.replace(".", " ")
        data = data.replace("!", " ")
        data = data.replace("?", " ")
        data = data.replace(",", " ")
        data = data.replace("\n", " ")
        data = data.replace("\r", " ")
        #remove extra spaces
        data = re.sub(r'\s+', ' ', data)  # remove extra spaces
        #clean-up punctuation - part1
        data = data.replace(" ,", ",")  # punctuation correction
        data = data.replace(" .", ".")  # punctuation correction
        data = data.replace(" !", "!")  # punctuation correction
        data = data.replace(" ?", "?")  # punctuation correction
        data = data.replace(" :", ":")  # punctuation correction
        #clean-up punctuation - part2
        data = data.replace(",.", ".")  # punctuation correction
        data = data.replace("...", ".")  # punctuation correction
        data = data.replace("..", ".")  # punctuation correction
        data = data.replace("!.", "!")  # punctuation correction
        data = data.replace("?.", "?")  # punctuation correction
        data = data.replace(":.", ":")  # punctuation correction




        return data

    def safe_chars(self, data, speech_lang):
        # modify or remove other TTS non-supported chars
        data = data.replace("Œ", "Oe")
        data = data.replace("œ", "oe")
        data = data.replace("’", "'")    # non-readable single-quote

        # common filter for non latin languages
        if speech_lang in [ 'Chinese', 'English', 'Korean', 'Japanese' ]:
            data = data.replace("Á", "A")
            data = data.replace("À", "A")
            data = data.replace("Â", "A")
            data = data.replace("Ä", "A")
            data = data.replace("Ã", "A")
            data = data.replace("á", "a")
            data = data.replace("à", "a")
            data = data.replace("â", "a")
            data = data.replace("ä", "a")
            data = data.replace("ã", "a")
            data = data.replace("É", "E")
            data = data.replace("È", "E")
            data = data.replace("Ê", "E")
            data = data.replace("Ë", "E")
            data = data.replace("é", "e")
            data = data.replace("è", "e")
            data = data.replace("ê", "e")
            data = data.replace("ë", "e")
            data = data.replace("Í", "I")
            data = data.replace("Ì", "I")
            data = data.replace("Î", "I")
            data = data.replace("Ï", "I")
            data = data.replace("í", "i")
            data = data.replace("ì", "i")
            data = data.replace("î", "i")
            data = data.replace("ï", "i")
            data = data.replace("Ó", "O")
            data = data.replace("Ò", "O")
            data = data.replace("Ô", "O")
            data = data.replace("Õ", "O")
            data = data.replace("Ö", "O")
            data = data.replace("ó", "o")
            data = data.replace("ò", "o")
            data = data.replace("ô", "o")
            data = data.replace("ö", "o")
            data = data.replace("õ", "o")
            data = data.replace("Ú", "U")
            data = data.replace("Ù", "U")
            data = data.replace("Û", "U")
            data = data.replace("Ü", "U")
            data = data.replace("ú", "u")
            data = data.replace("ù", "u")
            data = data.replace("û", "u")
            data = data.replace("ü", "u")
            data = data.replace("Ÿ", "Y")
            data = data.replace("ÿ", "y")
            data = data.replace("Æ", "Ae")
            data = data.replace("æ", "ae")
            data = data.replace("Œ", "Oe")
            data = data.replace("œ", "oe")
            data = data.replace("Ç", "S")
            data = data.replace("ç", "s")
            data = data.replace("Ñ", "N")
            data = data.replace("ñ", "n")
            data = data.replace("ß", "b")
            data = data.replace("¿", "")

        # language specific filters
        if ( speech_lang == 'English' ):
            # remove everything except standard ascii
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\uffff]', '', data)
            data = data.encode('utf-8')
        elif speech_lang in [ 'French', 'German', 'Italian', 'Portuguese', 'Spanish' ]:
            # remove everything except ascii and latin chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u00bf]', '', data)
            data = re.sub(ur'[\u0100-\uffff]', '', data)
            data = data.encode('utf-8')
        elif ( speech_lang == 'Chinese' ):
            # remove everything except ascii and chinese chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u2e7f]', '', data)
            data = re.sub(ur'[\u3040-\u30ff]', '', data)        # japanese hiragana/katakana
            data = re.sub(ur'[\u3130-\u318f]', '', data)       # korean hangul
            data = re.sub(ur'[\ua000-\uf8ff]', '', data)
            data = re.sub(ur'[\ufb00-\uffff]', '', data)
            data = data.encode('utf-8')
        elif ( speech_lang == 'Japanese' ):
            # remove everything except ascii and japanese chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u2ffff]', '', data)
            data = re.sub(ur'[\u3100-\u33ff]', '', data) # korean hangul
            data = re.sub(ur'[\u4dc0-\u4dff]', '', data)
            data = re.sub(ur'[\u9fb0-\ufeff]', '', data)
            data = re.sub(ur'[\ufff0-\uffff]', '', data)
            data = data.encode('utf-8')
        elif ( speech_lang == 'Korean' ):
            # remove everything except ascii and hangul chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u30ff]', '', data)
            data = re.sub(ur'[\u3200-\uabff]', '', data)
            data = re.sub(ur'[\ud7a4-\uffff]', '', data)
            data = data.encode('utf-8')

        # english-specific filter
        if (speech_lang == "English"):
            data = data.replace("&", " and ")
        # french-specific filter
        elif (speech_lang == "French"):
            data = data.replace("&", " et ")
            data = data.replace("ß", "b")
        # german-specific filter
        elif (speech_lang == "German"):
            data = data.replace("&", " und ")
        # italian-specific filter
        elif (speech_lang == "Italian"):
            data = data.replace("&", " e ")
            data = data.replace("ß", "b")
        # korean specific filter
            data = data.replace("'", "")
            data = data.replace("…", " ")
        # portuguese-specific filter
        elif (speech_lang == "Portuguese"):
            data = data.replace("&", " e ")
            data = data.replace("ß", "b")
        # spanish-specific filter
        elif (speech_lang == "Spanish"):
            data = data.replace("&", " y ")
            data = data.replace("ß", "b")

        return data

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self, p):
        result = self.safe_chars(p, self.tts.getLanguage())
        result = self.cleanup_text(result)
        result = result.replace("  ", " ")
        result = result.replace("  ", " ")
        result = result.replace("  ", " ")
        result = result.replace("  ", " ")
        result = "=+ +=" + result + "=+ +="
        result = result.replace("=+ += ", "")
        result = result.replace(" =+ +=", "")
        result = result.replace("=+ +=", "")
        result = result.replace(" ", ";")
        self.onStopped(result) #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                            </Box>
                                            <Link inputowner="1" indexofinput="3" outputowner="1" indexofoutput="6" />
                                            <Link inputowner="3" indexofinput="3" outputowner="1" indexofoutput="5" />
                                            <Link inputowner="0" indexofinput="4" outputowner="3" indexofoutput="4" />
                                            <Link inputowner="1" indexofinput="3" outputowner="3" indexofoutput="4" />
                                            <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="2" />
                                            <Link inputowner="6" indexofinput="2" outputowner="1" indexofoutput="6" />
                                            <Link inputowner="0" indexofinput="5" outputowner="6" indexofoutput="3" />
                                            <Link inputowner="1" indexofinput="2" outputowner="4" indexofoutput="4" />
                                            <Link inputowner="7" indexofinput="2" outputowner="2" indexofoutput="4" />
                                            <Link inputowner="1" indexofinput="8" outputowner="7" indexofoutput="4" />
                                            <Link inputowner="4" indexofinput="2" outputowner="7" indexofoutput="4" />
                                            <Link inputowner="0" indexofinput="4" outputowner="2" indexofoutput="6" />
                                            <Link inputowner="3" indexofinput="2" outputowner="4" indexofoutput="4" />
                                            <Link inputowner="6" indexofinput="4" outputowner="2" indexofoutput="5" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                </BehaviorLayer>
                            </Timeline>
                        </Box>
                        <Box name="MoveAndSay" id="4" localization="8" tooltip="Adaptation of PandoraBot&apos;s move and speak" x="385" y="51">
                            <bitmap>media/images/box/box-diagram.png</bitmap>
                            <script language="4">
                                <content>
                                    <![CDATA[]]>
</content>
                            </script>
                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                            <Input name="B Explanation anim_onStart" type="3" type_size="1" nature="2" inner="0" tooltip="This input has been automatically generated&#x0A;by converting several boxes into a single box." id="2" />
                            <Output name="output" type="1" type_size="1" nature="1" inner="0" tooltip="" id="3" />
                            <Timeline enable="0">
                                <BehaviorLayer name="behavior_layer1">
                                    <BehaviorKeyframe name="keyframe1" index="1">
                                        <Diagram>
                                            <Box name="B Explanation anim" id="11" localization="8" tooltip="Animation for explanation." x="463" y="0">
                                                <bitmap>media/images/box/movement/move.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Input name="onTerminate" type="0" type_size="1" nature="1" inner="0" tooltip="" id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when animation is finished." id="4" />
                                                <Timeline enable="0">
                                                    <BehaviorLayer name="behavior_layer1">
                                                        <BehaviorKeyframe name="keyframe1" index="1">
                                                            <Diagram>
                                                                <Box name="Explanation anim loop" id="4" localization="8" tooltip="Explanation anim loop" x="440" y="120">
                                                                    <bitmap>media/images/box/movement/move.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="" id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="onStopped exit" id="4" />
                                                                    <Timeline enable="0">
                                                                        <BehaviorLayer name="behavior_layer1">
                                                                            <BehaviorKeyframe name="keyframe1" index="1">
                                                                                <Diagram>
                                                                                    <Box name="Randomizer" id="2" localization="8" tooltip="This box provides random outputs." x="335" y="46">
                                                                                        <bitmap>media/images/box/loop.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[import random

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        pass

    def onUnload(self):
        pass

    def onInput_onStart(self):
        anim = random.randrange(1, 11)
        if (anim == 1):
            self.onOutput1()
        elif (anim == 2):
            self.onOutput2()
        elif (anim == 3):
            self.onOutput3()
        elif (anim == 4):
            self.onOutput4()
        elif (anim == 5):
            self.onOutput5()
        elif (anim == 6):
            self.onOutput6()
        elif (anim == 7):
            self.onOutput7()
        elif (anim == 8):
            self.onOutput8()
        elif (anim == 9):
            self.onOutput9()
        elif (anim == 10):
            self.onOutput10()]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                        <Input name="input" type="1" type_size="1" nature="3" inner="0" tooltip="" id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="onStopped exit" id="4" />
                                                                                        <Output name="onOutput1" type="1" type_size="1" nature="2" inner="0" tooltip="Output 1" id="5" />
                                                                                        <Output name="onOutput2" type="1" type_size="1" nature="2" inner="0" tooltip="output 2" id="6" />
                                                                                        <Output name="onOutput3" type="1" type_size="1" nature="2" inner="0" tooltip="output 3" id="7" />
                                                                                        <Output name="onOutput4" type="1" type_size="1" nature="2" inner="0" tooltip="output 4" id="8" />
                                                                                        <Output name="onOutput5" type="1" type_size="1" nature="2" inner="0" tooltip="output 5" id="9" />
                                                                                        <Output name="onOutput6" type="1" type_size="1" nature="2" inner="0" tooltip="output 6" id="10" />
                                                                                        <Output name="onOutput7" type="1" type_size="1" nature="2" inner="0" tooltip="output 7" id="11" />
                                                                                        <Output name="onOutput8" type="1" type_size="1" nature="2" inner="0" tooltip="output 8" id="12" />
                                                                                        <Output name="onOutput9" type="1" type_size="1" nature="2" inner="0" tooltip="output 9" id="13" />
                                                                                        <Output name="onOutput10" type="1" type_size="1" nature="2" inner="0" tooltip="output 10" id="14" />
                                                                                    </Box>
                                                                                    <Box name="Explain_1" id="39" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="580" y="119">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="47">
                                                                                            <BehaviorLayer name="behavior_layer1">
                                                                                                <BehaviorKeyframe name="keyframe1" index="1">
                                                                                                    <Diagram>
                                                                                                        <Box name="blink" id="2" localization="8" tooltip="tags:&#x0A;LED" x="105" y="69">
                                                                                                            <bitmap>media/images/box/interaction/LED.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );

        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );

        self.onStopped()


    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                                            <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                                        </Box>
                                                                                                        <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                                    </Diagram>
                                                                                                </BehaviorKeyframe>
                                                                                            </BehaviorLayer>
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="25" value="-3.69386" />
                                                                                                    <Key frame="47" value="-3.95753" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="25" value="-4.13332" />
                                                                                                    <Key frame="47" value="-9.75839" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="23" value="73.2993" />
                                                                                                    <Key frame="45" value="90.4382" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="23" value="1.40386" />
                                                                                                    <Key frame="45" value="2.28278" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="23" value="-47.1124" />
                                                                                                    <Key frame="45" value="-58.1867" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="23" value="-86.8346" />
                                                                                                    <Key frame="45" value="-70.7504" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="45" value="-73" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="45" value="0.585455" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="81.9175" />
                                                                                                    <Key frame="43" value="90.3551" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="-2.11181" />
                                                                                                    <Key frame="43" value="-1.84813" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="44.295" />
                                                                                                    <Key frame="43" value="67.059" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="74.7104" />
                                                                                                    <Key frame="43" value="62.845" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="56" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="0.690909" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="-19.949" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="12.483" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="15.735" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="-5.27591" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="4.91953" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="-9.84147" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="-3.95272" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="19.8611" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="-5.88634" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="2.63916" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="3.78175" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_2" id="40" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="584" y="230">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="54">
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-4.04542" />
                                                                                                    <Key frame="34" value="-4.57277" />
                                                                                                    <Key frame="54" value="-4.39699" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-3.69386" />
                                                                                                    <Key frame="34" value="-12.8346" />
                                                                                                    <Key frame="54" value="-9.93417" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="70.0473" />
                                                                                                    <Key frame="32" value="68.3774" />
                                                                                                    <Key frame="52" value="76.4634" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="0.498473" />
                                                                                                    <Key frame="32" value="0.498473" />
                                                                                                    <Key frame="52" value="3.51326" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-44.2119" />
                                                                                                    <Key frame="32" value="-88.6852" />
                                                                                                    <Key frame="52" value="-91.7614" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-53.4358" />
                                                                                                    <Key frame="32" value="-46.2286" />
                                                                                                    <Key frame="52" value="-43.6798" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="32" value="-56" />
                                                                                                    <Key frame="52" value="-55.8137" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="32" value="0.774545" />
                                                                                                    <Key frame="52" value="0.745478" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="53.1769" />
                                                                                                    <Key frame="30" value="56.4289" />
                                                                                                    <Key frame="50" value="61.0872" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="-1.0571" />
                                                                                                    <Key frame="30" value="-0.881321" />
                                                                                                    <Key frame="50" value="-0.969213" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="35.0664" />
                                                                                                    <Key frame="30" value="61.0823" />
                                                                                                    <Key frame="50" value="57.3909" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="83.3238" />
                                                                                                    <Key frame="30" value="67.2396" />
                                                                                                    <Key frame="50" value="66.6243" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="30" value="44" />
                                                                                                    <Key frame="50" value="43.2403" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="30" value="0.416364" />
                                                                                                    <Key frame="50" value="0.401116" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="-19.7732" />
                                                                                                    <Key frame="51" value="-19.7732" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="13.4498" />
                                                                                                    <Key frame="51" value="13.5377" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="13.0104" />
                                                                                                    <Key frame="51" value="13.0104" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="-3.34229" />
                                                                                                    <Key frame="51" value="-3.34229" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="6.85315" />
                                                                                                    <Key frame="51" value="6.94104" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="-10.193" />
                                                                                                    <Key frame="51" value="-10.193" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="-2.81013" />
                                                                                                    <Key frame="51" value="-2.81013" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="16.697" />
                                                                                                    <Key frame="51" value="16.697" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="-5.88634" />
                                                                                                    <Key frame="51" value="-5.79845" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="7.03374" />
                                                                                                    <Key frame="51" value="7.12163" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="2.63916" />
                                                                                                    <Key frame="51" value="2.63916" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_3" id="41" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="586" y="341">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="75">
                                                                                            <BehaviorLayer name="behavior_layer1">
                                                                                                <BehaviorKeyframe name="keyframe1" index="1">
                                                                                                    <Diagram>
                                                                                                        <Box name="blink" id="2" localization="8" tooltip="tags:&#x0A;LED" x="176" y="110">
                                                                                                            <bitmap>media/images/box/interaction/LED.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );

        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );

        self.onStopped()


    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                                            <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                                        </Box>
                                                                                                        <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                                    </Diagram>
                                                                                                </BehaviorKeyframe>
                                                                                            </BehaviorLayer>
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="35" value="-5.01223" />
                                                                                                    <Key frame="44" value="-5.27591" />
                                                                                                    <Key frame="56" value="-5.89115" />
                                                                                                    <Key frame="75" value="-6.24272" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="23" value="9.9" />
                                                                                                    <Key frame="35" value="-2.55126" />
                                                                                                    <Key frame="44" value="-7.91266" />
                                                                                                    <Key frame="56" value="-7.20953" />
                                                                                                    <Key frame="75" value="-2.02391" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="51.8537" />
                                                                                                    <Key frame="33" value="57.0393" />
                                                                                                    <Key frame="42" value="51.9416" />
                                                                                                    <Key frame="54" value="63.2796" />
                                                                                                    <Key frame="73" value="68.641" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="4.30429" />
                                                                                                    <Key frame="33" value="4.74375" />
                                                                                                    <Key frame="42" value="4.65586" />
                                                                                                    <Key frame="54" value="5.09532" />
                                                                                                    <Key frame="73" value="5.53477" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="-45.7061" />
                                                                                                    <Key frame="33" value="-53.7921" />
                                                                                                    <Key frame="42" value="-55.55" />
                                                                                                    <Key frame="54" value="-63.3723" />
                                                                                                    <Key frame="73" value="-67.3275" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="-59.6761" />
                                                                                                    <Key frame="33" value="-40.5157" />
                                                                                                    <Key frame="42" value="-60.8187" />
                                                                                                    <Key frame="54" value="-36.9121" />
                                                                                                    <Key frame="73" value="-28.8261" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="-66" />
                                                                                                    <Key frame="33" value="-71" />
                                                                                                    <Key frame="54" value="-73.9193" />
                                                                                                    <Key frame="73" value="-76.0287" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="0.28" />
                                                                                                    <Key frame="33" value="0.552727" />
                                                                                                    <Key frame="42" value="0.429091" />
                                                                                                    <Key frame="54" value="0.551298" />
                                                                                                    <Key frame="73" value="0.52948" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="83.0961" />
                                                                                                    <Key frame="31" value="83.0961" />
                                                                                                    <Key frame="40" value="83.0961" />
                                                                                                    <Key frame="52" value="83.1427" />
                                                                                                    <Key frame="71" value="83.2306" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-36.6686" />
                                                                                                    <Key frame="31" value="-37.4648" />
                                                                                                    <Key frame="40" value="-37.4648" />
                                                                                                    <Key frame="52" value="-37.775" />
                                                                                                    <Key frame="71" value="-37.9508" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="42.6565" />
                                                                                                    <Key frame="31" value="42.2584" />
                                                                                                    <Key frame="40" value="42.2584" />
                                                                                                    <Key frame="52" value="41.9742" />
                                                                                                    <Key frame="71" value="41.8811" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="80.2476" />
                                                                                                    <Key frame="31" value="80.3354" />
                                                                                                    <Key frame="40" value="80.3354" />
                                                                                                    <Key frame="52" value="79.6323" />
                                                                                                    <Key frame="71" value="79.8081" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="21.8826" />
                                                                                                    <Key frame="52" value="21.0916" />
                                                                                                    <Key frame="71" value="21.8826" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="31" value="0.77166" />
                                                                                                    <Key frame="52" value="0.772024" />
                                                                                                    <Key frame="71" value="0.744751" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="-19.158" />
                                                                                                    <Key frame="72" value="-18.8943" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="10.11" />
                                                                                                    <Key frame="72" value="10.11" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="12.2194" />
                                                                                                    <Key frame="72" value="12.2194" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="-3.60596" />
                                                                                                    <Key frame="72" value="-3.60596" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="7.3805" />
                                                                                                    <Key frame="72" value="7.3805" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="-7.99574" />
                                                                                                    <Key frame="72" value="-7.99574" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="-1.49176" />
                                                                                                    <Key frame="72" value="-1.49176" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="15.2029" />
                                                                                                    <Key frame="72" value="15.2029" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="-5.79845" />
                                                                                                    <Key frame="72" value="-5.79845" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="7.4732" />
                                                                                                    <Key frame="72" value="7.64898" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="53" value="1.0571" />
                                                                                                    <Key frame="72" value="1.0571" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_4" id="42" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="590" y="448">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="68">
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-3.86964" />
                                                                                                    <Key frame="32" value="-3.60596" />
                                                                                                    <Key frame="43" value="-3.78175" />
                                                                                                    <Key frame="54" value="-4.04542" />
                                                                                                    <Key frame="68" value="-4.3091" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="4.56797" />
                                                                                                    <Key frame="32" value="-8.61579" />
                                                                                                    <Key frame="43" value="-3.16651" />
                                                                                                    <Key frame="54" value="-9.5826" />
                                                                                                    <Key frame="68" value="-15.9108" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="60.8187" />
                                                                                                    <Key frame="30" value="67.5863" />
                                                                                                    <Key frame="41" value="73.7388" />
                                                                                                    <Key frame="52" value="68.9047" />
                                                                                                    <Key frame="66" value="77.6939" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="1.75543" />
                                                                                                    <Key frame="30" value="1.84332" />
                                                                                                    <Key frame="41" value="2.72224" />
                                                                                                    <Key frame="52" value="2.37067" />
                                                                                                    <Key frame="66" value="9.66569" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-63.7239" />
                                                                                                    <Key frame="30" value="-58.7141" />
                                                                                                    <Key frame="41" value="-58.2746" />
                                                                                                    <Key frame="52" value="-57.3078" />
                                                                                                    <Key frame="66" value="-68.6458" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-65.4769" />
                                                                                                    <Key frame="30" value="-52.0295" />
                                                                                                    <Key frame="41" value="-51.2385" />
                                                                                                    <Key frame="52" value="-78.2212" />
                                                                                                    <Key frame="66" value="-69.1684" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="30" value="-56" />
                                                                                                    <Key frame="41" value="-55.55" />
                                                                                                    <Key frame="66" value="-65" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="0.4" />
                                                                                                    <Key frame="30" value="0.73166" />
                                                                                                    <Key frame="41" value="0.733842" />
                                                                                                    <Key frame="66" value="0.58" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="62.3176" />
                                                                                                    <Key frame="28" value="70.4037" />
                                                                                                    <Key frame="39" value="77.0835" />
                                                                                                    <Key frame="50" value="63.4602" />
                                                                                                    <Key frame="64" value="74.2709" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="-2.90283" />
                                                                                                    <Key frame="28" value="-1.40867" />
                                                                                                    <Key frame="39" value="-1.67235" />
                                                                                                    <Key frame="50" value="-4.66067" />
                                                                                                    <Key frame="64" value="-5.3638" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="70.6625" />
                                                                                                    <Key frame="28" value="66.9711" />
                                                                                                    <Key frame="39" value="66.6195" />
                                                                                                    <Key frame="50" value="61.5218" />
                                                                                                    <Key frame="64" value="80.9459" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="64.7786" />
                                                                                                    <Key frame="28" value="49.5733" />
                                                                                                    <Key frame="39" value="49.3976" />
                                                                                                    <Key frame="50" value="75.853" />
                                                                                                    <Key frame="64" value="72.7768" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="28" value="61" />
                                                                                                    <Key frame="39" value="60.0276" />
                                                                                                    <Key frame="64" value="47" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="0.489091" />
                                                                                                    <Key frame="28" value="0.744751" />
                                                                                                    <Key frame="39" value="0.747296" />
                                                                                                    <Key frame="64" value="0.58" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="-17.4881" />
                                                                                                    <Key frame="40" value="-17.4881" />
                                                                                                    <Key frame="65" value="-19.6853" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="10.2857" />
                                                                                                    <Key frame="40" value="10.2857" />
                                                                                                    <Key frame="65" value="11.692" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="15.9987" />
                                                                                                    <Key frame="40" value="16.0866" />
                                                                                                    <Key frame="65" value="10.9889" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="-3.07861" />
                                                                                                    <Key frame="40" value="-3.07861" />
                                                                                                    <Key frame="65" value="-2.99072" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="3.60116" />
                                                                                                    <Key frame="40" value="3.51326" />
                                                                                                    <Key frame="65" value="5.00742" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="-8.25942" />
                                                                                                    <Key frame="40" value="-8.25942" />
                                                                                                    <Key frame="65" value="-9.92936" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="-2.63435" />
                                                                                                    <Key frame="40" value="-2.63435" />
                                                                                                    <Key frame="65" value="0.529755" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="17.9275" />
                                                                                                    <Key frame="40" value="17.9275" />
                                                                                                    <Key frame="65" value="14.1482" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="-5.79845" />
                                                                                                    <Key frame="40" value="-5.79845" />
                                                                                                    <Key frame="65" value="-5.88634" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="5.10012" />
                                                                                                    <Key frame="40" value="5.18802" />
                                                                                                    <Key frame="65" value="6.15482" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="29" value="2.02391" />
                                                                                                    <Key frame="40" value="2.02391" />
                                                                                                    <Key frame="65" value="0.178188" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_5" id="43" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="594" y="559">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="70">
                                                                                            <BehaviorLayer name="behavior_layer1">
                                                                                                <BehaviorKeyframe name="keyframe1" index="1">
                                                                                                    <Diagram>
                                                                                                        <Box name="blink" id="2" localization="8" tooltip="tags:&#x0A;LED" x="177" y="80">
                                                                                                            <bitmap>media/images/box/interaction/LED.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );

        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );

        self.onStopped()


    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                                            <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                                        </Box>
                                                                                                        <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                                    </Diagram>
                                                                                                </BehaviorKeyframe>
                                                                                            </BehaviorLayer>
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="20" value="-4.13332" />
                                                                                                    <Key frame="46" value="-4.13332" />
                                                                                                    <Key frame="70" value="-4.48488" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="20" value="2.89802" />
                                                                                                    <Key frame="46" value="-13.3619" />
                                                                                                    <Key frame="70" value="-18.2839" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="18" value="47.9865" />
                                                                                                    <Key frame="44" value="57.7425" />
                                                                                                    <Key frame="68" value="67.4106" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="18" value="1.75543" />
                                                                                                    <Key frame="44" value="0.70073" />
                                                                                                    <Key frame="68" value="0.876513" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="18" value="-99.4958" />
                                                                                                    <Key frame="30" value="-80" />
                                                                                                    <Key frame="44" value="-56.1652" />
                                                                                                    <Key frame="68" value="-57.8352" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="18" value="-61.6976" />
                                                                                                    <Key frame="30" value="-52" />
                                                                                                    <Key frame="44" value="-74.0024" />
                                                                                                    <Key frame="68" value="-67.85" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="30" value="-23.7" />
                                                                                                    <Key frame="44" value="-50" />
                                                                                                    <Key frame="68" value="-58" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="44" value="0.163636" />
                                                                                                    <Key frame="68" value="0.2" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="73.3041" />
                                                                                                    <Key frame="42" value="80.687" />
                                                                                                    <Key frame="66" value="82.9722" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="-2.02391" />
                                                                                                    <Key frame="42" value="-2.46337" />
                                                                                                    <Key frame="66" value="-2.46337" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="39.6368" />
                                                                                                    <Key frame="42" value="69.52" />
                                                                                                    <Key frame="66" value="78.7486" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="29.0946" />
                                                                                                    <Key frame="42" value="23.2937" />
                                                                                                    <Key frame="66" value="21.2722" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="0.788621" />
                                                                                                    <Key frame="66" value="0.788621" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="0.244025" />
                                                                                                    <Key frame="66" value="0.239662" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="-20.4764" />
                                                                                                    <Key frame="67" value="-20.3885" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="5.01223" />
                                                                                                    <Key frame="67" value="5.01223" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="10.5494" />
                                                                                                    <Key frame="67" value="10.5494" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="-5.29104" />
                                                                                                    <Key frame="67" value="-5.27591" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="7.73207" />
                                                                                                    <Key frame="67" value="7.73207" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="-5.2711" />
                                                                                                    <Key frame="67" value="-5.2711" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="-6.06212" />
                                                                                                    <Key frame="67" value="-6.15002" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="10.6325" />
                                                                                                    <Key frame="67" value="10.8083" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="-5.90622" />
                                                                                                    <Key frame="67" value="-5.90622" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="8.35212" />
                                                                                                    <Key frame="67" value="8.61579" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="43" value="5.18802" />
                                                                                                    <Key frame="67" value="5.27591" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_6" id="44" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="596" y="666">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="29">
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-4.04542" />
                                                                                                    <Key frame="29" value="-3.43018" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-7.03374" />
                                                                                                    <Key frame="29" value="-6" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="59.764" />
                                                                                                    <Key frame="27" value="75.4087" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="0.524946" />
                                                                                                    <Key frame="27" value="10" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="-57.7473" />
                                                                                                    <Key frame="27" value="-72.601" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="-83.3189" />
                                                                                                    <Key frame="27" value="-59.5003" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="27" value="-33" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="27" value="0.181818" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="13" value="66.888" />
                                                                                                    <Key frame="25" value="82.0054" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="13" value="-0.617646" />
                                                                                                    <Key frame="25" value="-7" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="13" value="73.563" />
                                                                                                    <Key frame="25" value="89.6472" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="13" value="79.7202" />
                                                                                                    <Key frame="25" value="65.3938" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="25" value="19" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="25" value="0.130909" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="-18.1033" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="9.67049" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="17.3171" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="-5.18802" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="4.65586" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="-7.81996" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="-6.3258" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="19.0701" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="-5.90622" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="4.57277" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="5.10012" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_7" id="45" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="600" y="775">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="45">
                                                                                            <BehaviorLayer name="behavior_layer1">
                                                                                                <BehaviorKeyframe name="keyframe1" index="1">
                                                                                                    <Diagram>
                                                                                                        <Box name="blink" id="2" localization="8" tooltip="tags:&#x0A;LED" x="134" y="83">
                                                                                                            <bitmap>media/images/box/interaction/LED.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );

        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );

        self.onStopped()


    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                                            <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                                        </Box>
                                                                                                        <Box name="blink" id="1" localization="8" tooltip="tags:&#x0A;LED" x="303" y="96">
                                                                                                            <bitmap>media/images/box/interaction/LED.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );

        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );

        self.onStopped()


    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                                            <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                                        </Box>
                                                                                                        <Link inputowner="1" indexofinput="2" outputowner="2" indexofoutput="4" />
                                                                                                        <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                                    </Diagram>
                                                                                                </BehaviorKeyframe>
                                                                                            </BehaviorLayer>
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="18" value="-3.69386" />
                                                                                                    <Key frame="30" value="-3.2544" />
                                                                                                    <Key frame="45" value="-3.95753" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="18" value="0.876513" />
                                                                                                    <Key frame="30" value="-13.2741" />
                                                                                                    <Key frame="45" value="-9.40682" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="69.52" />
                                                                                                    <Key frame="28" value="79.1001" />
                                                                                                    <Key frame="43" value="85.692" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="0.788621" />
                                                                                                    <Key frame="28" value="1.93121" />
                                                                                                    <Key frame="43" value="1.75543" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="-52.5617" />
                                                                                                    <Key frame="28" value="-77.2592" />
                                                                                                    <Key frame="43" value="-81.5659" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="16" value="-68.7289" />
                                                                                                    <Key frame="28" value="-49.3927" />
                                                                                                    <Key frame="43" value="-46.756" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="28" value="-51" />
                                                                                                    <Key frame="43" value="-59" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="28" value="0.709091" />
                                                                                                    <Key frame="43" value="0.729091" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="14" value="73.1283" />
                                                                                                    <Key frame="26" value="82.9722" />
                                                                                                    <Key frame="41" value="87.3668" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="14" value="-1.40867" />
                                                                                                    <Key frame="26" value="-1.145" />
                                                                                                    <Key frame="41" value="-1.40867" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="14" value="63.1917" />
                                                                                                    <Key frame="26" value="84.2858" />
                                                                                                    <Key frame="41" value="92.0202" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="14" value="70.14" />
                                                                                                    <Key frame="26" value="57.923" />
                                                                                                    <Key frame="41" value="52.0343" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="53.9" />
                                                                                                    <Key frame="41" value="57.1" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="26" value="0.794545" />
                                                                                                    <Key frame="41" value="0.807273" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="-18.367" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="8.5279" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="15.2956" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="-5.10012" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="6.58948" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="-6.94104" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="-6.3258" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="16.4333" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="-5.88634" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="6.77007" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="42" value="5.01223" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_8" id="46" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="601" y="875">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="58">
                                                                                            <BehaviorLayer name="behavior_layer1">
                                                                                                <BehaviorKeyframe name="keyframe1" index="1">
                                                                                                    <Diagram>
                                                                                                        <Box name="blink" id="2" localization="8" tooltip="tags:&#x0A;LED" x="139" y="62">
                                                                                                            <bitmap>media/images/box/interaction/LED.png</bitmap>
                                                                                                            <script language="4">
                                                                                                                <content>
                                                                                                                    <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        rDuration = 0.05;
        ALLeds.post.fadeRGB( "FaceLed0", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed1", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed2", 0xffffff, rDuration );
        ALLeds.post.fadeRGB( "FaceLed3", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed4", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed5", 0x000000, rDuration );
        ALLeds.post.fadeRGB( "FaceLed6", 0xffffff, rDuration );
        ALLeds.fadeRGB( "FaceLed7", 0x000000, rDuration );

        time.sleep( 0.1 );

        rDuration = 0.05;
        ALLeds.fadeRGB( "FaceLeds", 0xffffff, rDuration );

        self.onStopped()


    def onInput_onStop(self):
        self.onUnload() #~ it is usually a good idea to call onUnload of this box in a onStop method, as the code written in onUnload is used to finish the working of the box as well
        pass]]>
</content>
                                                                                                            </script>
                                                                                                            <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                                                            <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                                                            <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                                                            <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                                                        </Box>
                                                                                                        <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="1" />
                                                                                                    </Diagram>
                                                                                                </BehaviorKeyframe>
                                                                                            </BehaviorLayer>
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="-14.4166" />
                                                                                                    <Key frame="42" value="0.437054" />
                                                                                                    <Key frame="58" value="-3.60596" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="6.58948" />
                                                                                                    <Key frame="42" value="-11.8678" />
                                                                                                    <Key frame="58" value="-13.8014" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="60.1155" />
                                                                                                    <Key frame="40" value="75.145" />
                                                                                                    <Key frame="56" value="80.6822" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="2.28278" />
                                                                                                    <Key frame="40" value="1.22808" />
                                                                                                    <Key frame="56" value="1.75543" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-61.9661" />
                                                                                                    <Key frame="40" value="-92.5524" />
                                                                                                    <Key frame="56" value="-98.7927" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-65.2133" />
                                                                                                    <Key frame="40" value="-48.6017" />
                                                                                                    <Key frame="56" value="-47.9865" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="3.2" />
                                                                                                    <Key frame="40" value="-51" />
                                                                                                    <Key frame="56" value="-51.1554" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="0.563636" />
                                                                                                    <Key frame="40" value="0.754545" />
                                                                                                    <Key frame="56" value="0.725842" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="82.7964" />
                                                                                                    <Key frame="38" value="76.9077" />
                                                                                                    <Key frame="54" value="79.5444" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-1.145" />
                                                                                                    <Key frame="38" value="-0.881321" />
                                                                                                    <Key frame="54" value="-0.705538" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="70.311" />
                                                                                                    <Key frame="38" value="84.8131" />
                                                                                                    <Key frame="54" value="78.9244" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="57.4836" />
                                                                                                    <Key frame="38" value="45.0909" />
                                                                                                    <Key frame="54" value="42.7178" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="48" />
                                                                                                    <Key frame="38" value="61.4" />
                                                                                                    <Key frame="54" value="60.3792" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="0.709091" />
                                                                                                    <Key frame="38" value="0.8" />
                                                                                                    <Key frame="54" value="0.769478" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="-21.2674" />
                                                                                                    <Key frame="55" value="-21.4432" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="1.0571" />
                                                                                                    <Key frame="55" value="1.0571" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="12.3951" />
                                                                                                    <Key frame="55" value="12.3072" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="-5.29104" />
                                                                                                    <Key frame="55" value="-5.29104" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="8.08363" />
                                                                                                    <Key frame="55" value="7.90785" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="-2.28278" />
                                                                                                    <Key frame="55" value="-2.37067" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="-12.0388" />
                                                                                                    <Key frame="55" value="-11.9509" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="9.31412" />
                                                                                                    <Key frame="55" value="9.22623" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="-5.90622" />
                                                                                                    <Key frame="55" value="-5.90622" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="10.7252" />
                                                                                                    <Key frame="55" value="10.4615" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="39" value="8.87947" />
                                                                                                    <Key frame="55" value="8.87947" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_10" id="48" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="603" y="1089">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="50">
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-6.33061" />
                                                                                                    <Key frame="32" value="-2.37548" />
                                                                                                    <Key frame="50" value="-2.37548" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="12.7419" />
                                                                                                    <Key frame="32" value="-9.5826" />
                                                                                                    <Key frame="50" value="-10.7252" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="76.6392" />
                                                                                                    <Key frame="30" value="81.3853" />
                                                                                                    <Key frame="48" value="86.4831" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="19.7732" />
                                                                                                    <Key frame="30" value="20.0369" />
                                                                                                    <Key frame="48" value="20.1248" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-69.4369" />
                                                                                                    <Key frame="30" value="-73.8315" />
                                                                                                    <Key frame="48" value="-75.853" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-76.0239" />
                                                                                                    <Key frame="30" value="-50.2717" />
                                                                                                    <Key frame="48" value="-45.4376" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-65" />
                                                                                                    <Key frame="48" value="-68.3822" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="0.156364" />
                                                                                                    <Key frame="48" value="0.155662" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="70.14" />
                                                                                                    <Key frame="28" value="78.8413" />
                                                                                                    <Key frame="46" value="83.2359" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="-18.8991" />
                                                                                                    <Key frame="28" value="-17.9323" />
                                                                                                    <Key frame="46" value="-17.7565" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="71.1899" />
                                                                                                    <Key frame="28" value="78.3091" />
                                                                                                    <Key frame="46" value="83.4947" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="70.4916" />
                                                                                                    <Key frame="28" value="49.4854" />
                                                                                                    <Key frame="46" value="42.2783" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="60" />
                                                                                                    <Key frame="46" value="60.0276" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="15" value="0.163636" />
                                                                                                    <Key frame="46" value="0.165117" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="-19.7732" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="3.2544" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="13.7135" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="-2.02391" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="3.95272" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="-2.63435" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="-3.1617" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="15.2029" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="-5.90622" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="6.77007" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="47" value="1.49656" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Box name="Explain_9" id="49" localization="8" tooltip="tags:&#x0A;bodytalk; explain; present; clear" x="599" y="978">
                                                                                        <bitmap>media/images/box/movement/move.png</bitmap>
                                                                                        <script language="4">
                                                                                            <content>
                                                                                                <![CDATA[#import abcdk.choregraphetools as choregraphetools

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
#        self.oldfps = ALFrameManager.getTimelineFps(self.getName())
#        choregraphetools.frameNumber.increaseParent( self.getName() );

    def onLoad(self):
        #puts code for box cleanup here
        pass

    def onUnload(self):
        #puts code for box cleanup here
        ""

    def onInput_onStart(self):
#        newfps = (self.oldfps * self.getParameter("FPS (%)")) / 100
#        ALFrameManager.setTimelineFps(self.getName(), newfps)
		pass

    def onInput_onStop(self):
        ""]]>
</content>
                                                                                        </script>
                                                                                        <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                                                        <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                                                        <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                                                        <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                                                        <Parameter name="FPS (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="20" max="200" tooltip="" id="5" />
                                                                                        <Timeline enable="1" fps="25" start_frame="1" end_frame="-1" size="83">
                                                                                            <ActuatorList model="Nao">
                                                                                                <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="-3.95753" />
                                                                                                    <Key frame="42" value="-1.0571" />
                                                                                                    <Key frame="55" value="-3.78175" />
                                                                                                    <Key frame="71" value="-2.81494" />
                                                                                                    <Key frame="83" value="-2.99072" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="21" value="-21.0964" />
                                                                                                    <Key frame="42" value="-25.6668" />
                                                                                                    <Key frame="55" value="-21.2722" />
                                                                                                    <Key frame="71" value="-22.9421" />
                                                                                                    <Key frame="83" value="-22.6785" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="58.7093" />
                                                                                                    <Key frame="40" value="44.8224" />
                                                                                                    <Key frame="53" value="48.1623" />
                                                                                                    <Key frame="69" value="52.7326" />
                                                                                                    <Key frame="81" value="60.2034" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="12.3024" />
                                                                                                    <Key frame="40" value="0.498473" />
                                                                                                    <Key frame="53" value="0.876513" />
                                                                                                    <Key frame="69" value="2.89802" />
                                                                                                    <Key frame="81" value="3.51326" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-53.7043" />
                                                                                                    <Key frame="40" value="-42.0147" />
                                                                                                    <Key frame="53" value="-37.708" />
                                                                                                    <Key frame="69" value="-74.183" />
                                                                                                    <Key frame="81" value="-78.226" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="19" value="-26.7167" />
                                                                                                    <Key frame="40" value="-52.8205" />
                                                                                                    <Key frame="53" value="-59.8519" />
                                                                                                    <Key frame="69" value="-35.9453" />
                                                                                                    <Key frame="81" value="-34.3633" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="40" value="-43" />
                                                                                                    <Key frame="53" value="-42.8936" />
                                                                                                    <Key frame="81" value="-20.4812" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="40" value="0.794545" />
                                                                                                    <Key frame="53" value="0.794933" />
                                                                                                    <Key frame="81" value="0.662933" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="60.2082" />
                                                                                                    <Key frame="38" value="49.4854" />
                                                                                                    <Key frame="51" value="54.9347" />
                                                                                                    <Key frame="67" value="63.0208" />
                                                                                                    <Key frame="79" value="67.8548" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="-9.67049" />
                                                                                                    <Key frame="38" value="-0.969213" />
                                                                                                    <Key frame="51" value="-1.0571" />
                                                                                                    <Key frame="67" value="-1.93602" />
                                                                                                    <Key frame="79" value="-2.81494" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="66.268" />
                                                                                                    <Key frame="38" value="51.3264" />
                                                                                                    <Key frame="51" value="51.1506" />
                                                                                                    <Key frame="67" value="88.944" />
                                                                                                    <Key frame="79" value="94.1296" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="17" value="30.8524" />
                                                                                                    <Key frame="38" value="56.341" />
                                                                                                    <Key frame="51" value="62.5813" />
                                                                                                    <Key frame="67" value="51.7706" />
                                                                                                    <Key frame="79" value="47.2003" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="38" value="31" />
                                                                                                    <Key frame="51" value="30.9355" />
                                                                                                    <Key frame="79" value="14.0603" />
                                                                                                </ActuatorCurve>
                                                                                                <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                                    <Key frame="38" value="0.703636" />
                                                                                                    <Key frame="51" value="0.706205" />
                                                                                                    <Key frame="79" value="0.617842" />
                                                                                                </ActuatorCurve>
                                                                                            </ActuatorList>
                                                                                        </Timeline>
                                                                                        <Resource name="Standing" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="HeadPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="LHand" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RShoulderRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RElbowYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RWristYaw" type="Lock" timeout="2" />
                                                                                        <Resource name="RHand" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipYawPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="LHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="LAnkleRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipRoll" type="Lock" timeout="2" />
                                                                                        <Resource name="RHipPitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RKneePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnklePitch" type="Lock" timeout="2" />
                                                                                        <Resource name="RAnkleRoll" type="Lock" timeout="2" />
                                                                                    </Box>
                                                                                    <Link inputowner="39" indexofinput="2" outputowner="2" indexofoutput="5" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="39" indexofoutput="4" />
                                                                                    <Link inputowner="40" indexofinput="2" outputowner="2" indexofoutput="6" />
                                                                                    <Link inputowner="41" indexofinput="2" outputowner="2" indexofoutput="7" />
                                                                                    <Link inputowner="42" indexofinput="2" outputowner="2" indexofoutput="8" />
                                                                                    <Link inputowner="43" indexofinput="2" outputowner="2" indexofoutput="9" />
                                                                                    <Link inputowner="44" indexofinput="2" outputowner="2" indexofoutput="10" />
                                                                                    <Link inputowner="45" indexofinput="2" outputowner="2" indexofoutput="11" />
                                                                                    <Link inputowner="46" indexofinput="2" outputowner="2" indexofoutput="12" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="40" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="41" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="42" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="43" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="44" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="45" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="46" indexofoutput="4" />
                                                                                    <Link inputowner="48" indexofinput="2" outputowner="2" indexofoutput="14" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="48" indexofoutput="4" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="49" indexofoutput="4" />
                                                                                    <Link inputowner="49" indexofinput="2" outputowner="2" indexofoutput="13" />
                                                                                    <Link inputowner="2" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                                </Diagram>
                                                                            </BehaviorKeyframe>
                                                                        </BehaviorLayer>
                                                                    </Timeline>
                                                                </Box>
                                                                <Box name="Wait" id="8" localization="8" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." x="538" y="248">
                                                                    <bitmap>media/images/box/wait.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[import threading # opkg install python-threading
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        bRunning = self.tb
        self.onUnload()
        if( bRunning ):
            self.timerOutput()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                                    <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                                    <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="2" value="0.2" default_value="1" min="0" max="5000" tooltip="Duration the box waits before stimulating the output." id="5" />
                                                                </Box>
                                                                <Box name="Stand" id="3" localization="8" tooltip='Robot will go to the position &quot;Stand&#x0A;Position description : Standing position with low power consumption. &#x0A;' x="684" y="106">
                                                                    <bitmap>media/images/positions/Stand.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                                                    <Timeline enable="1" fps="10" start_frame="1" end_frame="-1" size="20">
                                                                        <ActuatorList model="Nao">
                                                                            <ActuatorCurve name="value" actuator="HeadYaw" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-0.266079" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="HeadPitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-10.7252" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="91.2292" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="9.4899" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-70.3158" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-33.6601" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LWristYaw" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="6.23791" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHand" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="0.232026" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderPitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="85.1695" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RShoulderRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-6.4185" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowYaw" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="67.6742" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RElbowRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="24.9637" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RWristYaw" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="9.92936" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHand" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="0.406934" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipYawPitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-9.22623" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="6.4185" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LHipPitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="11.692" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LKneePitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-5.18802" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="4.04062" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="LAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-6.15002" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-3.86483" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RHipPitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="10.8083" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RKneePitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="-4.2164" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnklePitch" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="3.60596" />
                                                                            </ActuatorCurve>
                                                                            <ActuatorCurve name="value" actuator="RAnkleRoll" recordable="1" mute="0" unit="-1">
                                                                                <Key frame="20" value="3.78175" />
                                                                            </ActuatorCurve>
                                                                        </ActuatorList>
                                                                    </Timeline>
                                                                </Box>
                                                                <Box name="If" id="5" localization="8" tooltip="Test a condition and stimulate the then or else outputs depending on the boolean&#x0A;value of the condition.&#x0A;The condition can be set in parameters." x="273" y="250">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onData(self, p):
        param = self.getParameter("Value to compare")
        try:
            p = float(p)
            param = float(param)
        except:
            p = str(p)
            param = str(param)
        operator = self.getParameter("Condition operator")
        if( operator == "<" ):
            self.outputTrueOrFalse( p < param )
        elif( operator == "< or =" ):
            self.outputTrueOrFalse( p <= param )
        elif( operator == "=" ):
            self.outputTrueOrFalse( p == param )
        elif( operator == "> or =" ):
            self.outputTrueOrFalse( p >= param )
        elif( operator == ">" ):
            self.outputTrueOrFalse( p > param )
        elif( operator == "≠" ):
            self.outputTrueOrFalse( p != param )
        else:
            raise Exception( "Operator not known: " + str(operator) )

    def outputTrueOrFalse(self, condition):
        if( condition ):
            self.output_then()
        else:
            self.output_else()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onData" type="3" type_size="1" nature="1" inner="0" tooltip="The data to test." id="2" />
                                                                    <Output name="output_then" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent if the condition is true." id="3" />
                                                                    <Output name="output_else" type="1" type_size="1" nature="2" inner="0" tooltip="Signal sent if the condition is false." id="4" />
                                                                    <Parameter name="Condition operator" inherits_from_parent="0" content_type="3" value="=" default_value="=" custom_choice="0" tooltip='Choose the condition operator.&#x0A;&#x0A;For example:&#x0A;If you choose &quot;&gt; or =&quot;, the condition will be: is the input is higher or equal&#x0A;than the parameter?' id="5">
                                                                        <Choice value="&lt;" />
                                                                        <Choice value="&lt; or =" />
                                                                        <Choice value="=" />
                                                                        <Choice value="&gt; or =" />
                                                                        <Choice value="&gt;" />
                                                                        <Choice value="≠" />
                                                                    </Parameter>
                                                                    <Parameter name="Value to compare" inherits_from_parent="0" content_type="3" value="Stand" default_value="0" custom_choice="0" tooltip="This is the value which is compared to the input value." id="6" />
                                                                </Box>
                                                                <Box name="NAOS-LIFE_ACTIVE" id="7" localization="8" tooltip="Check To see if noa&apos;s life is running" x="217" y="1">
                                                                    <bitmap>media/images/box/box-diagram.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.behaviors = ALProxy("ALBehaviorManager")
    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self):
        if self.behaviors.isBehaviorRunning("naos-life"):
            self.RUNNING() #~ activate output of the box
        else:
            self.NOTRUNNING()
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="RUNNING" type="1" type_size="1" nature="1" inner="0" tooltip="" id="4" />
                                                                    <Output name="NOTRUNNING" type="1" type_size="1" nature="1" inner="0" tooltip="" id="5" />
                                                                </Box>
                                                                <Box name="Robot Posture" id="2" localization="8" tooltip="Returns the name of the robot posture each time its value changes." x="69" y="355">
                                                                    <bitmap>media/images/box/sensors/inertial_unit.png</bitmap>
                                                                    <script language="4">
                                                                        <content>
                                                                            <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self, False)

    def onLoad(self):
        self.postureProxy = ALProxy("ALRobotPosture")
        self.lastPosture = None
        self.bIsRunning = False

    def onUnload(self):
        self.bMustStop = True

    def onInput_onStart(self):
        if( self.bIsRunning ):
            return
        self.bIsRunning = True
        self.bMustStop = False
        while( not self.bMustStop ):
            currentPosture = self.postureProxy.getPostureFamily()
            if( self.lastPosture != currentPosture ):
                self.lastPosture = currentPosture
                self.posture(self.lastPosture)
            time.sleep( self.getParameter("Frequency of updates (s)") )
        self.bIsRunning = False
        self.onStopped()

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                                    </script>
                                                                    <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                                    <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                                    <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                                    <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is stopped." id="4" />
                                                                    <Output name="posture" type="3" type_size="1" nature="2" inner="0" tooltip="The current posture family of the robot.&#x0A;It might be:&#x0A;- Standing&#x0A;- Sitting&#x0A;- LyingBack&#x0A;- LyingBelly&#x0A;- LyingLeft&#x0A;- LyingRignt&#x0A;- Back&#x0A;- Belly&#x0A;- Left&#x0A;- Right&#x0A;- UpSideDown&#x0A;- Lifted&#x0A;- Unknown" id="5" />
                                                                    <Parameter name="Frequency of updates (s)" inherits_from_parent="0" content_type="2" value="1" default_value="1" min="0.1" max="60" tooltip="This value in seconds is the time ellapsed between two updates of posture&#x0A;values." id="6" />
                                                                </Box>
                                                                <Link inputowner="8" indexofinput="2" outputowner="0" indexofoutput="3" />
                                                                <Link inputowner="3" indexofinput="2" outputowner="8" indexofoutput="4" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="3" indexofoutput="4" />
                                                                <Link inputowner="4" indexofinput="2" outputowner="5" indexofoutput="3" />
                                                                <Link inputowner="4" indexofinput="3" outputowner="0" indexofoutput="3" />
                                                                <Link inputowner="7" indexofinput="2" outputowner="0" indexofoutput="2" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="7" indexofoutput="4" />
                                                                <Link inputowner="0" indexofinput="4" outputowner="5" indexofoutput="4" />
                                                                <Link inputowner="5" indexofinput="2" outputowner="2" indexofoutput="5" />
                                                                <Link inputowner="2" indexofinput="2" outputowner="7" indexofoutput="5" />
                                                            </Diagram>
                                                        </BehaviorKeyframe>
                                                    </BehaviorLayer>
                                                </Timeline>
                                            </Box>
                                            <Box name="Say ParamText" id="18" localization="8" tooltip="Say the text set in box parameters." x="447" y="366">
                                                <bitmap>media/images/box/interaction/say.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import time

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.tts = ALProxy('ALTextToSpeech')
        self.ttsStop = ALProxy('ALTextToSpeech', True) #Create another proxy as wait is blocking if audioout is remote

    def onLoad(self):
        self.bIsRunning = False
        self.ids = []

    def onUnload(self):
        for id in self.ids:
            try:
                self.ttsStop.stop(id)
            except:
                pass
        while( self.bIsRunning ):
            time.sleep( 0.2 )

    def onInput_onStart(self):
        self.bIsRunning = True
        try:
            sentence = "\RSPD="+ str( self.getParameter("Speed (%)") ) + "\ "
            sentence += "\VCT="+ str( self.getParameter("Voice shaping (%)") ) + "\ "
            sentence += self.getParameter('ParamText')
            sentence +=  "\RST\ "
            id = self.tts.post.say(str(sentence))
            self.ids.append(id)
            self.tts.wait(id, 0)
        finally:
            try:
                self.ids.remove(id)
            except:
                pass
            if( self.ids == [] ):
                self.onStopped() # activate output of the box
                self.bIsRunning = False

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when Diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this Input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this Input." id="3" />
                                                <Output name="onStopped" type="1" type_size="1" nature="1" inner="0" tooltip="Signal sent when Box behavior is finished." id="4" />
                                                <Parameter name="Voice shaping (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="50" max="150" tooltip='Used to modify at runtime the voice feature (tone, speed). In a slighty&#x0A;different way than pitch and speed, it gives a kind of &quot;gender or age&#x0A;modification&quot; effect.&#x0A;&#x0A;For instance, a quite good male derivation of female voice can be&#x0A;obtained setting this parameter to 78%.&#x0A;&#x0A;Note: For a better effect, you can compensate this parameter with the&#x0A;speed parameter. For example, if you want to decrease by 20% the voice&#x0A;shaping, you will have to increase by 20% the speed to keep a constant&#x0A;average speed.' id="5" />
                                                <Parameter name="Speed (%)" inherits_from_parent="1" content_type="1" value="100" default_value="100" min="50" max="200" tooltip="Changes the speed of the voice.&#x0A;&#x0A;Note: For a better effect, you can compensate this parameter with the voice&#x0A;shaping parameter. For example, if you want to increase by 20% the speed, you&#x0A;will have to decrease by 20% the voice shaping to keep a constant average&#x0A;speed." id="6" />
                                                <Parameter name="ParamText" inherits_from_parent="1" content_type="3" value="" default_value="" custom_choice="0" tooltip="Parameter Text" id="7" />
                                            </Box>
                                            <Box name="Wait" id="16" localization="8" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." x="518" y="109">
                                                <bitmap>media/images/box/wait.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import threading

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        bRunning = self.tb
        self.onUnload()
        if( bRunning ):
            self.timerOutput()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="2" value="2" default_value="1" min="0" max="5000" tooltip="Duration the box waits before stimulating the output." id="5" />
                                            </Box>
                                            <Box name="Wait" id="1" localization="8" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." x="301" y="46">
                                                <bitmap>media/images/box/wait.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import threading

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        bRunning = self.tb
        self.onUnload()
        if( bRunning ):
            self.timerOutput()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="2" value="0.5" default_value="1" min="0" max="5000" tooltip="Duration the box waits before stimulating the output." id="5" />
                                            </Box>
                                            <Box name="Text Cleaner" id="5" localization="8" tooltip="cleans text of bad data" x="83" y="10">
                                                <bitmap>media/images/box/box-diagram.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import re
import urllib
import urllib2
import xml.dom.minidom

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.myLogger = ALProxy("ALLogger")
        self.tts = ALProxy("ALTextToSpeech")
        self.lang_ref = { 'Chinese' : 'zh',
                               'English' : 'en',
                               'French' : 'fr',
                               'German' : 'de',
                               'Italian' : 'it',
                               'Japanese' : 'ja',
                               'Korean' : 'ko',
                               'Portuguese' : 'pt',
                               'Spanish' : 'es'
                              }
        self.error_msg = { "Chinese" : "我发现了什么。",
                                 "English" : "I found nothing.",
                                 "French" : "Je n'ai rien trouvé.",
                                 "German" : "Ich fand nichts.",
                                 "Italian" : "Ho trovato nulla.",
                                 "Japanese" : "何を発見した。",
                                 "Korean" : "아무것도 없습니다.",
                                 "Portuguese" : "Eu não achei nada.",
                                 "Spanish" : "No he encontrado nada."
                                }

    def cleanup_text(self, data):
        #remove unnecessary parts
        data = re.sub(r'\([^\[\]]*?\)', '', data)  # remove parentheses text blocks
        data = re.sub(r'(?u)【[^[\]]*?】', '', data)  # remove parentheses text blocks (japanese)
        data = re.sub(r'(?u)（[^[\]]*?）', '', data)  # remove parentheses text blocks (japanese)
        #replace chars
        data = data.replace("�", "'")
        data = data.replace("|", " ")
        data = data.replace(";", ".")
        data = data.replace(" - ", ", ")
        #remove chars
        data = data.replace('"', '')  # remove quotes
        data = data.replace('«', '')    # remove quotes
        data = data.replace('»', '')    # remove quotes
        data = data.replace("#", "") # remove hashes
        data = data.replace("/", "")   # remove slashes
        data = data.replace("*", "") # remove stars
        data = data.replace(".", " ")
        data = data.replace("!", " ")
        data = data.replace("?", " ")
        data = data.replace(",", " ")
        data = data.replace("\n", " ")
        data = data.replace("\r", " ")
        #remove extra spaces
        data = re.sub(r'\s+', ' ', data)  # remove extra spaces
        #clean-up punctuation - part1
        data = data.replace(" ,", ",")  # punctuation correction
        data = data.replace(" .", ".")  # punctuation correction
        data = data.replace(" !", "!")  # punctuation correction
        data = data.replace(" ?", "?")  # punctuation correction
        data = data.replace(" :", ":")  # punctuation correction
        #clean-up punctuation - part2
        data = data.replace(",.", ".")  # punctuation correction
        data = data.replace("...", ".")  # punctuation correction
        data = data.replace("..", ".")  # punctuation correction
        data = data.replace("!.", "!")  # punctuation correction
        data = data.replace("?.", "?")  # punctuation correction
        data = data.replace(":.", ":")  # punctuation correction




        return data

    def safe_chars(self, data, speech_lang):
        # modify or remove other TTS non-supported chars
        data = data.replace("Œ", "Oe")
        data = data.replace("œ", "oe")
        data = data.replace("’", "'")    # non-readable single-quote

        # common filter for non latin languages
        if speech_lang in [ 'Chinese', 'English', 'Korean', 'Japanese' ]:
            data = data.replace("Á", "A")
            data = data.replace("À", "A")
            data = data.replace("Â", "A")
            data = data.replace("Ä", "A")
            data = data.replace("Ã", "A")
            data = data.replace("á", "a")
            data = data.replace("à", "a")
            data = data.replace("â", "a")
            data = data.replace("ä", "a")
            data = data.replace("ã", "a")
            data = data.replace("É", "E")
            data = data.replace("È", "E")
            data = data.replace("Ê", "E")
            data = data.replace("Ë", "E")
            data = data.replace("é", "e")
            data = data.replace("è", "e")
            data = data.replace("ê", "e")
            data = data.replace("ë", "e")
            data = data.replace("Í", "I")
            data = data.replace("Ì", "I")
            data = data.replace("Î", "I")
            data = data.replace("Ï", "I")
            data = data.replace("í", "i")
            data = data.replace("ì", "i")
            data = data.replace("î", "i")
            data = data.replace("ï", "i")
            data = data.replace("Ó", "O")
            data = data.replace("Ò", "O")
            data = data.replace("Ô", "O")
            data = data.replace("Õ", "O")
            data = data.replace("Ö", "O")
            data = data.replace("ó", "o")
            data = data.replace("ò", "o")
            data = data.replace("ô", "o")
            data = data.replace("ö", "o")
            data = data.replace("õ", "o")
            data = data.replace("Ú", "U")
            data = data.replace("Ù", "U")
            data = data.replace("Û", "U")
            data = data.replace("Ü", "U")
            data = data.replace("ú", "u")
            data = data.replace("ù", "u")
            data = data.replace("û", "u")
            data = data.replace("ü", "u")
            data = data.replace("Ÿ", "Y")
            data = data.replace("ÿ", "y")
            data = data.replace("Æ", "Ae")
            data = data.replace("æ", "ae")
            data = data.replace("Œ", "Oe")
            data = data.replace("œ", "oe")
            data = data.replace("Ç", "S")
            data = data.replace("ç", "s")
            data = data.replace("Ñ", "N")
            data = data.replace("ñ", "n")
            data = data.replace("ß", "b")
            data = data.replace("¿", "")

        # language specific filters
        if ( speech_lang == 'English' ):
            # remove everything except standard ascii
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\uffff]', '', data)
            data = data.encode('utf-8')
        elif speech_lang in [ 'French', 'German', 'Italian', 'Portuguese', 'Spanish' ]:
            # remove everything except ascii and latin chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u00bf]', '', data)
            data = re.sub(ur'[\u0100-\uffff]', '', data)
            data = data.encode('utf-8')
        elif ( speech_lang == 'Chinese' ):
            # remove everything except ascii and chinese chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u2e7f]', '', data)
            data = re.sub(ur'[\u3040-\u30ff]', '', data)        # japanese hiragana/katakana
            data = re.sub(ur'[\u3130-\u318f]', '', data)       # korean hangul
            data = re.sub(ur'[\ua000-\uf8ff]', '', data)
            data = re.sub(ur'[\ufb00-\uffff]', '', data)
            data = data.encode('utf-8')
        elif ( speech_lang == 'Japanese' ):
            # remove everything except ascii and japanese chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u2ffff]', '', data)
            data = re.sub(ur'[\u3100-\u33ff]', '', data) # korean hangul
            data = re.sub(ur'[\u4dc0-\u4dff]', '', data)
            data = re.sub(ur'[\u9fb0-\ufeff]', '', data)
            data = re.sub(ur'[\ufff0-\uffff]', '', data)
            data = data.encode('utf-8')
        elif ( speech_lang == 'Korean' ):
            # remove everything except ascii and hangul chars
            data = unicode(data.decode('utf-8'))
            data = re.sub(ur'[\u007b-\u30ff]', '', data)
            data = re.sub(ur'[\u3200-\uabff]', '', data)
            data = re.sub(ur'[\ud7a4-\uffff]', '', data)
            data = data.encode('utf-8')

        # english-specific filter
        if (speech_lang == "English"):
            data = data.replace("&", " and ")
        # french-specific filter
        elif (speech_lang == "French"):
            data = data.replace("&", " et ")
            data = data.replace("ß", "b")
        # german-specific filter
        elif (speech_lang == "German"):
            data = data.replace("&", " und ")
        # italian-specific filter
        elif (speech_lang == "Italian"):
            data = data.replace("&", " e ")
            data = data.replace("ß", "b")
        # korean specific filter
            data = data.replace("'", "")
            data = data.replace("…", " ")
        # portuguese-specific filter
        elif (speech_lang == "Portuguese"):
            data = data.replace("&", " e ")
            data = data.replace("ß", "b")
        # spanish-specific filter
        elif (speech_lang == "Spanish"):
            data = data.replace("&", " y ")
            data = data.replace("ß", "b")

        return data

    def onLoad(self):
        #~ puts code for box initialization here
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self, p):
        self.log(p)
        result = self.safe_chars(p, self.tts.getLanguage())
        result = self.cleanup_text(result)
        self.onStopped(result) #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="3" type_size="1" nature="2" inner="0" tooltip="Box behavior starts when a signal is received on this input." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Box behavior stops when a signal is received on this input." id="3" />
                                                <Output name="onStopped" type="3" type_size="1" nature="1" inner="0" tooltip="Signal sent when box behavior is finished." id="4" />
                                            </Box>
                                            <Box name="BWait" id="3" localization="8" tooltip="Wait a moment before sending a signal on the output. The wait can be stopped any&#x0A;time. You may restart it any time, and it will start again." x="102" y="221">
                                                <bitmap>media/images/box/wait.png</bitmap>
                                                <script language="4">
                                                    <content>
                                                        <![CDATA[import threading

class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)

    def onLoad(self):
        self.tb = False

    def onUnload(self):
        if( self.tb ):
            self.tb.cancel()
            self.tb = False

    def triggerOutput( self, rPeriod = 1 ):
        self.onUnload() # to clean everything
        self.timerOutput()

    def startTimer( self, rPeriod = 1 ):
        if( self.tb ):
            self.tb.cancel()
        self.tb = threading.Timer( rPeriod, self.triggerOutput, [rPeriod] )
        self.tb.start()

    def onInput_onStart(self):
        self.startTimer( self.getParameter("Timeout (s)") )

    def onInput_onStop(self):
        self.onUnload()]]>
</content>
                                                </script>
                                                <Input name="onLoad" type="1" type_size="1" nature="0" inner="1" tooltip="Signal sent when diagram is loaded." id="1" />
                                                <Input name="onStart" type="1" type_size="1" nature="2" inner="0" tooltip="Start the Wait box with the configured timeout value." id="2" />
                                                <Input name="onStop" type="1" type_size="1" nature="3" inner="0" tooltip="Stop the wait and stimulate the output." id="3" />
                                                <Output name="timerOutput" type="1" type_size="1" nature="1" inner="0" tooltip="Send a bang once time set in parameters is ellapsed, or if the box is stopped." id="4" />
                                                <Parameter name="Timeout (s)" inherits_from_parent="0" content_type="2" value="3" default_value="1" min="0" max="5000" tooltip="Duration the box waits before stimulating the output." id="5" />
                                            </Box>
                                            <Link inputowner="0" indexofinput="3" outputowner="16" indexofoutput="4" />
                                            <Link inputowner="16" indexofinput="2" outputowner="18" indexofoutput="4" />
                                            <Link inputowner="11" indexofinput="3" outputowner="18" indexofoutput="4" />
                                            <Link inputowner="18" indexofinput="2" outputowner="1" indexofoutput="4" />
                                            <Link inputowner="5" indexofinput="2" outputowner="0" indexofoutput="2" />
                                            <Link inputowner="18" indexofinput="7" outputowner="5" indexofoutput="4" />
                                            <Link inputowner="1" indexofinput="2" outputowner="5" indexofoutput="4" />
                                            <Link inputowner="11" indexofinput="2" outputowner="5" indexofoutput="4" />
                                            <Link inputowner="3" indexofinput="2" outputowner="0" indexofoutput="2" />
                                            <Link inputowner="3" indexofinput="3" outputowner="5" indexofoutput="4" />
                                            <Link inputowner="0" indexofinput="3" outputowner="3" indexofoutput="4" />
                                        </Diagram>
                                    </BehaviorKeyframe>
                                </BehaviorLayer>
                            </Timeline>
                        </Box>
                        <Link inputowner="11" indexofinput="2" outputowner="0" indexofoutput="2" />
                        <Link inputowner="4" indexofinput="2" outputowner="11" indexofoutput="5" />
                        <Link inputowner="0" indexofinput="4" outputowner="11" indexofoutput="4" />
                        <Link inputowner="0" indexofinput="4" outputowner="4" indexofoutput="3" />
                    </Diagram>
                </BehaviorKeyframe>
            </BehaviorLayer>
        </Timeline>
    </Box>
</ChoregrapheProject>
